<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ post.title }} - Tech & Ethics Club Blog</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css', v='6.0') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="page">
        
        <div class="grid-background"></div>
        
        
        <header class="header">
            <div class="header-left">
                <h1 class="title">TECH & ETHICS CLUB</h1>
                <div class="dotted-line"></div>
            </div>
            <div class="header-right">
                <div class="blueprint-info">
                    <div class="info-item">
                        <span class="label">PAGE:</span>
                        <span class="value">BLOG</span>
                    </div>
                    <div class="info-item">
                        <span class="label">VERSION:</span>
                        <span class="value">1.0</span>
                    </div>
                    <div class="info-item">
                        <span class="label">STATUS:</span>
                        <span class="value">ACTIVE</span>
                    </div>
                </div>
            </div>
        </header>

        
        <nav class="navigation">
            <div class="nav-container">
                <a href="/" class="nav-button">
                    <span class="nav-text">HOME</span>
                </a>
                <a href="/team" class="nav-button">
                    <span class="nav-text">TEAM</span>
                </a>
                <a href="/gallery" class="nav-button">
                    <span class="nav-text">PROJECTS</span>
                </a>
                <a href="/blog" class="nav-button">
                    <span class="nav-text">BLOG</span>
                </a>
                <a href="/contact" class="nav-button">
                    <span class="nav-text">CONTACT US</span>
                </a>
                {% if current_user.is_authenticated %}
                    {% if current_user.is_admin %}
                        <a href="{{ url_for('add_gallery_item') }}" class="nav-button auth-small">
                            <span class="nav-text">ADD ITEM</span>
                        </a>
                    {% endif %}
                    {% if current_user.email in ['vaishnavanand90@gmail.com', 'asherburdeny@gmail.com', 'amazingadityab@gmail.com', 'chrisho2009@gmail.com'] %}
                    <a href="{{ url_for('add_blog_post') }}" class="nav-button auth-small">
                        <span class="nav-text">ADD POST</span>
                    </a>
                    {% endif %}
                    <a href="{{ url_for('logout') }}" class="nav-button auth-small">
                        <span class="nav-text">LOGOUT</span>
                    </a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="nav-button auth-small">
                        <span class="nav-text">LOGIN</span>
                    </a>
                {% endif %}
            </div>
        </nav>

        
        <div class="page-marker left">BLOG</div>
        <div class="page-marker right">1.0</div>

        
        <main class="content blog-post-page">
            
            <div class="search-section">
                <div class="search-container">
                    <form method="GET" action="{{ url_for('blog') }}" class="search-form">
                        <div class="search-input-group">
                            <input type="text" name="search" class="search-input" placeholder="Search everything: posts, titles, content, authors, tags..." autocomplete="off">
                        </div>
                        <div class="search-filters">
                            <select name="author_filter" class="filter-select">
                                <option value="">All Authors</option>
                                {% for author in all_authors %}
                                <option value="{{ author }}">{{ author }}</option>
                                {% endfor %}
                            </select>
                            <select name="tag_filter" class="filter-select">
                                <option value="">All Tags</option>
                                {% for tag in all_tags %}
                                <option value="{{ tag }}">{{ tag }}</option>
                                {% endfor %}
                            </select>
                            <div class="search-options">
                                <label class="search-option">
                                    <input type="checkbox" name="search_content" value="1"> Include content
                                </label>
                                <label class="search-option">
                                    <input type="checkbox" name="exact_match" value="1"> Exact match
                                </label>
                            </div>
                            <button type="submit" class="search-btn">SEARCH</button>
                        </div>
                    </form>
                </div>
            </div>

            
            <section class="section blueprint-section blog-post-content">
                <div class="blog-post-header">
                    <h1 class="blog-post-title">{{ post.title }}</h1>
                    <div class="blog-post-meta">
                        <span class="blog-post-date">Published: {{ post.created_at.split('T')[0] }}</span>
                        <span class="blog-post-author">By: {{ post.author_name }}</span>
                        {% if post.author_city or post.author_state or post.author_country %}
                        <span class="blog-post-location">
                            {% if post.author_city %}{{ post.author_city }}{% endif %}
                            {% if post.author_state %}{% if post.author_city %}, {% endif %}{{ post.author_state }}{% endif %}
                            {% if post.author_country %}{% if post.author_city or post.author_state %}, {% endif %}{{ post.author_country }}{% endif %}
                        </span>
                        {% endif %}
                        {% if post.author_school %}
                        <span class="blog-post-school">{{ post.author_school }}</span>
                        {% endif %}
                        {% if post.updated_at != post.created_at %}
                        <span class="blog-post-updated">Updated: {{ post.updated_at.split('T')[0] }}</span>
                        {% endif %}
                        {% if post.tags %}
                        <div class="blog-post-tags">
                            {% for tag in post.tags %}
                            <span class="blog-tag">{{ tag }}</span>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                
                <div class="blog-post-body">
                    <div class="blog-post-text">
                        {% for paragraph in post.content.split('\n\n') %}
                            {% if paragraph.strip().startswith('#') or paragraph.strip().startswith('##') or paragraph.strip().startswith('###') %}
                                
                                {% set header_text = paragraph.strip().lstrip('#').strip() %}
                                <div class="blog-post-header-section">
                                    <h3 class="blog-post-subheader">{{ header_text }}</h3>
                                    <div class="blog-post-header-line"></div>
                                </div>
                            {% elif paragraph.strip().startswith('---') or paragraph.strip().startswith('***') %}
                                
                                <div class="blog-post-separator"></div>
                            {% elif paragraph.strip() %}
                                
                                <div class="blog-post-paragraph">
                                    {% set paragraph_parts = paragraph.strip().split('\n') %}
                                    {% set text_content = [] %}
                                    {% set image_url = '' %}
                                    
                                    {% for part in paragraph_parts %}
                                        {% if part.startswith('[IMAGE:') and part.endswith(']') %}
                                            {% set image_url = part[7:-1] %}
                                        {% else %}
                                            {% set _ = text_content.append(part) %}
                                        {% endif %}
                                    {% endfor %}
                                    
                                    {% set text_to_show = text_content|join(' ') %}
                                    {% if text_to_show.strip() %}
                                        <p class="blueprint-text">{{ text_to_show }}</p>
                                    {% endif %}
                                    
                                    {% if image_url %}
                                        <div class="blog-post-image">
                                            <img src="{{ image_url }}" alt="Paragraph image" class="paragraph-image">
                                        </div>
                                    {% endif %}
                                </div>
                            {% else %}
                                
                                <div class="blog-post-empty-line"></div>
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
                
                {% if post.works_cited and post.works_cited|length > 0 %}
                <div class="blog-post-works-cited">
                    <h3 class="works-cited-title">Works Cited</h3>
                    <div class="works-cited-list">
                        {% for source in post.works_cited %}
                        <div class="works-cited-item">
                            {% if source.author %}
                                <span class="works-cited-author">{{ source.author }}. </span>
                            {% endif %}
                            <a href="{{ source.url }}" target="_blank" rel="noopener noreferrer" class="works-cited-link">{{ source.title }}</a>
                            <span class="works-cited-url">{{ source.url }}</span>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
                
                {% if current_user.is_authenticated and current_user.email in ['vaishnavanand90@gmail.com', 'asherburdeny@gmail.com', 'amazingadityab@gmail.com', 'chrisho2009@gmail.com'] %}
                <div class="admin-controls">
                    <a href="{{ url_for('edit_blog_post', post_id=post.id) }}" class="edit-btn">EDIT POST</a>
                    <form method="POST" action="{{ url_for('delete_blog_post', post_id=post.id) }}" style="display: inline;" class="delete-form">
                        <button type="submit" class="delete-btn" onclick="return confirm('Are you sure you want to delete this blog post?')">DELETE POST</button>
                    </form>
                </div>
                {% endif %}
            </section>
            
            
            <section class="section blueprint-section share-link-section">
                <div class="share-link-content">
                    <h3 class="share-link-title">Share This Post</h3>
                    <div class="link-container">
                        <input type="text" id="postLink" value="{{ request.url }}" readonly class="link-input">
                        <button onclick="copyLink()" class="copy-link-btn">COPY LINK</button>
                    </div>
                    <p class="share-link-note">Copy the link above to share this blog post with others.</p>
                </div>
            </section>
            
            
            <section class="section blueprint-section back-to-blog-section">
                <div class="back-to-blog-content">
                    <a href="{{ url_for('blog') }}" class="back-to-blog-btn">
                        ← BACK TO BLOG
                    </a>
                </div>
            </section>
        </main>

        
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-left">
                    <div class="footer-info">
                        <span class="footer-label">GENERATED:</span>
                        <span class="footer-value">2024-01-15</span>
                    </div>
                </div>
                <div class="footer-center">
                    <div class="footer-info">
                        <span class="footer-label">REVISION:</span>
                        <span class="footer-value">BETA-2.1</span>
                    </div>
                </div>
                <div class="footer-right">
                    <div class="footer-info">
                        <span class="footer-label">STATUS:</span>
                        <span class="footer-value">OPERATIONAL</span>
                    </div>
                </div>
            </div>
            <div class="footer-credits">
                <span class="credits-text">
                    Site made by: <strong>Vaishnav Anand</strong>
                </span>
            </div>
        </footer>
    </div>

    <script>
        // Intersection Observer for animations
        function initAnimations() {
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-in');
                    }
                });
            }, observerOptions);

            // Observe all blueprint sections
            document.querySelectorAll('.blueprint-section').forEach(section => {
                observer.observe(section);
            });
        }

        // Start animations when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initAnimations();
            }, 1000);
        });
        
        // Copy link function
        function copyLink() {
            const linkInput = document.getElementById('postLink');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999); // For mobile devices
            
            try {
                document.execCommand('copy');
                const copyBtn = document.querySelector('.copy-link-btn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = 'COPIED!';
                copyBtn.style.background = '#28a745';
                
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                    copyBtn.style.background = '';
                }, 2000);
            } catch (err) {
                console.error('Failed to copy: ', err);
            }
        }
    </script>
</body>
</html> 